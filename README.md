# hexavalent-chrome

Sometimes (ostensibly only on Linux and when using SecretService), Chrome's
builtin password manager and its associated syncing will randomly break. This
turns out to be related to malformed encrypted password entries.

This tool finds your Chrome profile, attempts to decrypt all the entires, and
deletes ones that fail.

This probably should have some sort of backup functionality, use at your own
risk etc etc :)

## Misc notes

### The configuration directory

Right now, this is hardcoded to be `~/.config/google-chrome`; I don't use
beta/canary enough to trigger this, and it only seems possible to trigger on
Linux. Would be pretty easy to upgrade. Canonical docs are at:

https://chromium.googlesource.com/chromium/src/+/HEAD/docs/user_data_dir.md

I didn't find where Chrome stores the list of profiles, so I just look for
directories that have a `Login Data` file (a SQLite database). Didn't check if
that's just what Chrome does too.

### SecretService is not good

I found this gem in my default keyring:

> Because of quirks in the gnome libsecret API, Chrome needs to store a dummy
> entry to guarantee that this keyring was properly unlocked. More details at
> http://crbug.com/660005.

### Integrate `refl`

See https://github.com/borkdude/refl

Right now I manually tweak the reflection JSON. Would be cool if that wasn't
necessary :)

## Installation

Download from https://github.com/io.lvh/hexavalent-chrome

## Usage

FIXME: explanation

Run the project directly, via `:exec-fn`:

    $ clojure -X:run-x
    Hello, Clojure!

Run the project, overriding the name to be greeted:

    $ clojure -X:run-x :name '"Someone"'
    Hello, Someone!

Run the project directly, via `:main-opts` (`-m io.lvh.hexavalent-chrome`):

    $ clojure -M:run-m
    Hello, World!

Run the project, overriding the name to be greeted:

    $ clojure -M:run-m Via-Main
    Hello, Via-Main!

Run the project's tests (they'll fail until you edit them):

    $ clojure -X:test:runner

Build an uberjar:

    $ clojure -X:uberjar

This will update the generated `pom.xml` file to keep the dependencies synchronized with
your `deps.edn` file. You can update the version (and SCM tag) information in the `pom.xml` using the
`:version` argument:

    $ clojure -X:uberjar :version '"1.2.3"'

If you don't want the `pom.xml` file in your project, you can remove it, but you will
also need to remove `:sync-pom true` from the `deps.edn` file (in the `:exec-args` for `depstar`).

Run that uberjar:

    $ java -jar hexavalent-chrome.jar

## Options

FIXME: listing of options this app accepts.

## Examples

...

### Bugs

...

### Any Other Sections
### That You Think
### Might be Useful

## License

Copyright Â© 2021 Lvh

_EPLv1.0 is just the default for projects generated by `clj-new`: you are not_
_required to open source this project, nor are you required to use EPLv1.0!_
_Feel free to remove or change the `LICENSE` file and remove or update this_
_section of the `README.md` file!_

Distributed under the Eclipse Public License version 1.0.
